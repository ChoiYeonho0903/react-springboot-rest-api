coffee-order:
  create: >
    INSERT INTO
      coffee_order(
        address,
        postcode,
        email,
        order_status)
    VALUES (
      ?, ?, ?, ?)

  select:
    byId:
      SELECT
        c.*,
        p.id as product_id,
        p.name,
        p.description,
        p.price,
        p.category,
        i.quantity
      FROM
        coffee_order c
      JOIN
        coffee_order_item i
      ON
        c.id=i.order_id
      JOIN
        coffee_product p
      ON
        i.product_id=p.id
      WHERE
        c.id=?
      ORDER BY
        c.id, p.id

    createdBetween:
      SELECT
        c.*,
        p.id as product_id,
        p.name,
        p.description,
        p.price,
        p.category,
        i.quantity
      FROM
        coffee_order c
      JOIN
        coffee_order_item i
      ON
        c.id=i.order_id
      JOIN
        coffee_product p
      ON
        i.product_id=p.id
      WHERE
        c.created_at
      BETWEEN
        ? AND ?
      ORDER BY
        c.id, p.id

  update:
    byId: >
      UPDATE
        coffee_order
      SET
        address=?,
        postcode=?,
        email=?,
        updated_at=?,
        order_status=?
      WHERE
        id=?

order-item:
  create: >
    INSERT INTO
      coffee_order_item(
        order_id,
        product_id,
        quantity)
    VALUES
      (?, ?, ?)

coffee-product:
  select:
    all: >
      SELECT
        *
      FROM
        coffee_product

    byId: >
      SELECT
        *
      FROM
        coffee_product p
      WHERE
        p.id=?
